<!DOCTYPE html>
<html lang=Vi>
<head>
    <meta charset="utf-8">
    
    <title>Ví dụ về Refactoring | AT Team</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Chúng ta bắt đầu với ví dụ:
1234567891011121314151617181920212223package vn.com.ndd.payroll;public class PayCalculator &amp;#123;	public static float calculate(double hours, double rate,			boolean isHourl">
<meta property="og:type" content="article">
<meta property="og:title" content="Ví dụ về Refactoring">
<meta property="og:url" content="https://hieunh161.github.io/at/2016/11/03/refactor-sample/index.html">
<meta property="og:site_name" content="AT Team">
<meta property="og:description" content="Chúng ta bắt đầu với ví dụ:
1234567891011121314151617181920212223package vn.com.ndd.payroll;public class PayCalculator &amp;#123;	public static float calculate(double hours, double rate,			boolean isHourl">
<meta property="og:image" content="https://c2.staticflickr.com/6/5514/30744617115_2e424bc5d0_o.png">
<meta property="og:updated_time" content="2016-11-03T02:25:40.931Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ví dụ về Refactoring">
<meta name="twitter:description" content="Chúng ta bắt đầu với ví dụ:
1234567891011121314151617181920212223package vn.com.ndd.payroll;public class PayCalculator &amp;#123;	public static float calculate(double hours, double rate,			boolean isHourl">
<meta name="twitter:image" content="https://c2.staticflickr.com/6/5514/30744617115_2e424bc5d0_o.png">
    

    

    
        <link rel="icon" href="/at/css/images/favicon.ico" />
    

    <link rel="stylesheet" href="/at/vendor/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/at/vendor/open-sans/styles.css">
    <link rel="stylesheet" href="/at/vendor/source-code-pro/styles.css">

    <link rel="stylesheet" href="/at/css/style.css">

    <script src="/at/vendor/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/at/vendor/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/at/vendor/justified-gallery/justifiedGallery.min.css">
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/at/" id="logo">
                <i class="logo"></i>
                <span class="site-title">AT Team</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/at/.">Home</a>
                
                    <a class="main-nav-link" href="/at/archives">Archives</a>
                
                    <a class="main-nav-link" href="/at/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="https://www.gravatar.com/avatar/0c0152226431d58a0a6e489a28bc4151" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/at/',
        CONTENT_URL: '/at/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/at/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/at/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/at/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/at/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="https://www.gravatar.com/avatar/0c0152226431d58a0a6e489a28bc4151?s=128" />
            <h2 id="name">AT Team</h2>
            <h3 id="title">Advance Technology Team</h3>
            <span id="location"><i class="fa fa-map-marker"></i>VietNam</span>
            <a id="follow" target="_blank" href="https://github.com/hieunh161/">FOLLOW</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                14
                <span>posts</span>
            </div>
            <div class="article-info-block">
                12
                <span>tags</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/hieunh161/" target="_blank" title="github" class=tooltip>
                            <i class="fa fa-github"></i>
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.facebook.com/hieunh161" target="_blank" title="facebook" class=tooltip>
                            <i class="fa fa-facebook"></i>
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-refactor-sample" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            Ví dụ về Refactoring
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/at/2016/11/03/refactor-sample/">
            <time datetime="2016-11-03T00:32:09.000Z" itemprop="datePublished">2016-11-03</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/at/categories/software/">software</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/at/tags/memo/">memo</a>, <a class="tag-link" href="/at/tags/refactoring/">refactoring</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>Chúng ta bắt đầu với ví dụ:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> vn.com.ndd.payroll;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PayCalculator</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">float</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> hours, <span class="keyword">double</span> rate,</span></span></div><div class="line">			<span class="keyword">boolean</span> isHourlyWorker) &#123;</div><div class="line">		<span class="keyword">if</span> (hours &lt; <span class="number">0</span> || hours &gt; <span class="number">80</span>) &#123;</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Hours out of range: "</span> + hours);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">float</span> wages = <span class="number">0</span>;</div><div class="line"></div><div class="line">		<span class="keyword">if</span> (hours &gt; <span class="number">40</span>) &#123;</div><div class="line">			<span class="keyword">double</span> overTimeHours = hours - <span class="number">40</span>;</div><div class="line">			<span class="keyword">if</span> (isHourlyWorker) &#123;</div><div class="line">				wages += (overTimeHours * <span class="number">1.5</span>) * rate;</div><div class="line">			&#125; <span class="keyword">else</span> &#123;</div><div class="line">				wages += overTimeHours * rate;</div><div class="line">			&#125;</div><div class="line">			hours -= overTimeHours;</div><div class="line">		&#125;</div><div class="line">		wages += hours * rate;</div><div class="line">		<span class="keyword">return</span> wages;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="Buoc-1-tao-unit-test"><a href="#Buoc-1-tao-unit-test" class="headerlink" title="Bước 1 tạo unit test"></a>Bước 1 tạo unit test</h2><p>Để có thể refactor hiệu quả chúng ta sẽ viết UT cho source này.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> vn.com.ndd.payroll;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Assert;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PayCalculatorTest</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">assertPay</span><span class="params">(<span class="keyword">double</span> expectPay, <span class="keyword">double</span> actualPay)</span></span>&#123;</div><div class="line">		Assert.assertEquals(expectPay, actualPay, <span class="number">0.001</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span>(expected = RuntimeException.class)</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shouldThrowExceptionWhenInvalidMinusValue</span><span class="params">()</span> </span>&#123;</div><div class="line">		PayCalculator.calculate(-<span class="number">0.1</span>, <span class="number">0</span>, <span class="keyword">true</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span>(expected = RuntimeException.class)</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shouldThrowExceptionWhenInvalidBiggerThan80</span><span class="params">()</span> </span>&#123;</div><div class="line">		PayCalculator.calculate(<span class="number">80.1</span>, <span class="number">0</span>, <span class="keyword">true</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shouldBe0WhenWorkHourIs0</span><span class="params">()</span> </span>&#123;</div><div class="line">		assertPay(<span class="number">0</span>, PayCalculator.calculate(<span class="number">0</span>, <span class="number">10</span>, <span class="keyword">true</span>));</div><div class="line">		assertPay(<span class="number">0</span>, PayCalculator.calculate(<span class="number">0</span>, <span class="number">10</span>, <span class="keyword">false</span>));</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shouldNotCalculateOvertimeWhenWorkRegularHours</span><span class="params">()</span> </span>&#123;</div><div class="line">		assertPay(<span class="number">300</span>, PayCalculator.calculate(<span class="number">30</span>, <span class="number">10</span>, <span class="keyword">true</span>));</div><div class="line">		assertPay(<span class="number">300</span>, PayCalculator.calculate(<span class="number">30</span>, <span class="number">10</span>, <span class="keyword">false</span>));</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shouldCalculateOvertimeWhenWorkHoursGreaterThan40</span><span class="params">()</span> </span>&#123;</div><div class="line">		assertPay(<span class="number">550</span>, PayCalculator.calculate(<span class="number">50</span>, <span class="number">10</span>, <span class="keyword">true</span>));</div><div class="line">		assertPay(<span class="number">500</span>, PayCalculator.calculate(<span class="number">50</span>, <span class="number">10</span>, <span class="keyword">false</span>));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Refactoring"><a href="#Refactoring" class="headerlink" title="Refactoring"></a>Refactoring</h2><h3 id="Step-1-Phan-tich-va-viet-lai-code-de-hieu-hon"><a href="#Step-1-Phan-tich-va-viet-lai-code-de-hieu-hon" class="headerlink" title="Step 1 : Phân tích và viết lại code dễ hiểu hơn"></a>Step 1 : Phân tích và viết lại code dễ hiểu hơn</h3><p>Đọc qua có thể thấy thuật toán ở đây như sau:</p>
<blockquote>
<p>Giá trị valid là từ 0 -&gt; 80. Nếu lớn hơn 40h sẽ được tính overtime. Chế độ overtime được quyết định bởi dạng hợp đồng. Nếu nhân viên làm việc theo giờ sẽ được tính với giá 1.5 còn bình thường vẫn 1. Hay nói cách khác, việc tính với rate khác chỉ có tác dụng với lao động theo giờ còn các chế độ khác không có gì khác biệt so với thông thường.</p>
</blockquote>
<p>Chúng ta có thể viết lại code theo cách dưới đây:</p>
<ol>
<li>Biến đổi logic theo thuật toán phía trên</li>
<li>Tách các biến hardcode cho dễ hiểu hơn</li>
<li>Chạy lại testcase để đảm bảo UT vẫn chạy đúng</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> vn.com.ndd.payroll;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PayCalculator</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">double</span> OVERTIME_BONUS_RATE = <span class="number">0.5</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> OVERTIME_LIMIT = <span class="number">80</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> OVERTIME_THRESHOLD = <span class="number">40</span>;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> hours, <span class="keyword">double</span> rate,</span></span></div><div class="line">			<span class="keyword">boolean</span> isHourlyWorker) &#123;</div><div class="line">		<span class="keyword">if</span> (hours &lt; <span class="number">0</span> || hours &gt; OVERTIME_LIMIT) &#123;</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Hours out of range: "</span> + hours);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">if</span> (isHourlyWorker) &#123;</div><div class="line">			<span class="keyword">double</span> overTime = Math.max(<span class="number">0</span>, hours - OVERTIME_THRESHOLD);</div><div class="line">			<span class="keyword">return</span> hours * rate + overTime * rate * OVERTIME_BONUS_RATE;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">return</span> hours * rate;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Nếu bạn nào không thích sử dụng thêm thư viện Math để tính overTimeHours thì có thể sử dụng toán tử một ngôi</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Sử dụng math</span></div><div class="line"><span class="keyword">double</span> overTime = Math.max(<span class="number">0</span>, hours - OVERTIME_THRESHOLD);</div><div class="line"><span class="comment">// sử dụng toán tử </span></div><div class="line"><span class="keyword">double</span> overTime = hours - OVERTIME_THRESHOLD &gt; <span class="number">0</span>? hours - OVERTIME_THRESHOLD : <span class="number">0</span>;</div></pre></td></tr></table></figure>
<h3 id="Step-2-Bo-tham-so-boolean"><a href="#Step-2-Bo-tham-so-boolean" class="headerlink" title="Step 2 : Bỏ tham số boolean"></a>Step 2 : Bỏ tham số boolean</h3><p>Hãy luôn nhớ rằng, tham số flag dạng boolean luôn là một cách code tồi, vì nó là dấu hiệu của sự vi phạm quy tắc “single responsibility”. Bởi vì trong đoạn code sau đó sẽ thường đi kèm if(A) do B else do C nghĩa là nó sẽ làm 2 việc.<br>Đầu tiên việc dễ dàng nhất để có thể bỏ được biến boolean trong trường hợp này là chuyển nó thành biến của hàm như sau. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PayCalculator</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">double</span> OVERTIME_BONUS_RATE = <span class="number">0.5</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> OVERTIME_LIMIT = <span class="number">80</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> OVERTIME_THRESHOLD = <span class="number">40</span>;</div><div class="line">	</div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> isHourlyWorker;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">PayCalculator</span><span class="params">(<span class="keyword">boolean</span> isHourlyWorker)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>.isHourlyWorker = isHourlyWorker;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> hours, <span class="keyword">double</span> rate)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (hours &lt; <span class="number">0</span> || hours &gt; OVERTIME_LIMIT) &#123;</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Hours out of range: "</span> + hours);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		<span class="keyword">if</span> (isHourlyWorker()) &#123;</div><div class="line">			<span class="keyword">double</span> overTime = Math.max(<span class="number">0</span>, hours - OVERTIME_THRESHOLD);</div><div class="line">			<span class="keyword">return</span> hours * rate + overTime * rate * OVERTIME_BONUS_RATE;</div><div class="line">		&#125; <span class="keyword">else</span> &#123;</div><div class="line">			<span class="keyword">return</span> hours * rate;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isHourlyWorker</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> isHourlyWorker;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Điều này dẫn đến cần phải thay đổi source UT như sau:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> vn.com.ndd.payroll;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Assert;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PayCalculatorTest</span> </span>&#123;</div><div class="line">	PayCalculator hourlyWorker = <span class="keyword">new</span> PayCalculator(<span class="keyword">true</span>);</div><div class="line">	PayCalculator nonHourlyWoker = <span class="keyword">new</span> PayCalculator(<span class="keyword">false</span>);</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">assertPay</span><span class="params">(<span class="keyword">double</span> expectPay, <span class="keyword">double</span> actualPay)</span></span>&#123;</div><div class="line">		Assert.assertEquals(expectPay, actualPay, <span class="number">0.001</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span>(expected = RuntimeException.class)</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shouldThrowExceptionWhenInvalidMinusValue</span><span class="params">()</span> </span>&#123;</div><div class="line">		hourlyWorker.calculate(-<span class="number">0.1</span>, <span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span>(expected = RuntimeException.class)</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shouldThrowExceptionWhenInvalidBiggerThan80</span><span class="params">()</span> </span>&#123;</div><div class="line">		hourlyWorker.calculate(<span class="number">80.1</span>, <span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shouldBe0WhenWorkHourIs0</span><span class="params">()</span> </span>&#123;</div><div class="line">		assertPay(<span class="number">0</span>, hourlyWorker.calculate(<span class="number">0</span>, <span class="number">10</span>));</div><div class="line">		assertPay(<span class="number">0</span>, nonHourlyWoker.calculate(<span class="number">0</span>, <span class="number">10</span>));</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shouldNotCalculateOvertimeWhenWorkRegularHours</span><span class="params">()</span> </span>&#123;</div><div class="line">		assertPay(<span class="number">300</span>, hourlyWorker.calculate(<span class="number">30</span>, <span class="number">10</span>));</div><div class="line">		assertPay(<span class="number">300</span>, nonHourlyWoker.calculate(<span class="number">30</span>, <span class="number">10</span>));</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shouldCalculateOvertimeWhenWorkHoursGreaterThan40</span><span class="params">()</span> </span>&#123;</div><div class="line">		assertPay(<span class="number">550</span>, hourlyWorker.calculate(<span class="number">50</span>, <span class="number">10</span>));</div><div class="line">		assertPay(<span class="number">500</span>, nonHourlyWoker.calculate(<span class="number">50</span>, <span class="number">10</span>));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Step-3-Polymorphism"><a href="#Step-3-Polymorphism" class="headerlink" title="Step 3 : Polymorphism"></a>Step 3 : Polymorphism</h3><p>Nhìn vào UT chúng ta đang tạo ra 2 biến test của cùng một hàm với 2 flag true false. Điều này gợi ý chúng ta có thể sử dụng tính đa hình ở đây để tiếp tục refactor source như sau:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> vn.com.ndd.payroll;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContractorCalculator</span> <span class="keyword">extends</span> <span class="title">PayCalculator</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ContractorCalculator</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>(<span class="keyword">false</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> vn.com.ndd.payroll;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HourlyCalculator</span> <span class="keyword">extends</span> <span class="title">PayCalculator</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">HourlyCalculator</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>(<span class="keyword">true</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>class test sẽ trở thành:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PayCalculatorTest</span> </span>&#123;</div><div class="line">	PayCalculator hourlyWorker = <span class="keyword">new</span> HourlyCalculator();</div><div class="line">	PayCalculator nonHourlyWoker = <span class="keyword">new</span> ContractorCalculator();</div><div class="line">	<span class="comment">//...</span></div></pre></td></tr></table></figure>
<p>Từ đây chúng ta có thể chuyển hàm tính toán vào các class con và class PayCalculator trở thành class abstract và source chúng ta trở thành:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> vn.com.ndd.payroll;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">PayCalculator</span> </span>&#123;</div><div class="line">	<span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">double</span> OVERTIME_BONUS_RATE = <span class="number">0.5</span>;</div><div class="line">	<span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> OVERTIME_LIMIT = <span class="number">80</span>;</div><div class="line">	<span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> OVERTIME_THRESHOLD = <span class="number">40</span>;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> hours, <span class="keyword">double</span> rate)</span></span>;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">validateHours</span><span class="params">(<span class="keyword">double</span> hours)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (hours &lt; <span class="number">0</span> || hours &gt; OVERTIME_LIMIT) &#123;</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Hours out of range: "</span> + hours);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> vn.com.ndd.payroll;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContractorCalculator</span> <span class="keyword">extends</span> <span class="title">PayCalculator</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ContractorCalculator</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> hours, <span class="keyword">double</span> rate)</span> </span>&#123;</div><div class="line">		validateHours(hours);</div><div class="line">		<span class="keyword">return</span> hours * rate;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> vn.com.ndd.payroll;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HourlyCalculator</span> <span class="keyword">extends</span> <span class="title">PayCalculator</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">HourlyCalculator</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> hours, <span class="keyword">double</span> rate)</span> </span>&#123;</div><div class="line">		validateHours(hours);</div><div class="line">		<span class="keyword">double</span> overTime = Math.max(<span class="number">0</span>, hours - OVERTIME_THRESHOLD);</div><div class="line">		<span class="keyword">return</span> hours * rate + overTime * rate * OVERTIME_BONUS_RATE;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Design-Pattern"><a href="#Design-Pattern" class="headerlink" title="Design Pattern?"></a>Design Pattern?</h2><p>Nếu bạn muốn một bước xa hơn nữa, với những ví dụ phức tạp hơn ở đây chúng ta có thể sử dụng template method để tránh việc phải gọi lại validateHours ở các class con như sau:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> vn.com.ndd.payroll;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">PayCalculator</span> </span>&#123;</div><div class="line">	<span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">double</span> OVERTIME_BONUS_RATE = <span class="number">0.5</span>;</div><div class="line">	<span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> OVERTIME_LIMIT = <span class="number">80</span>;</div><div class="line">	<span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> OVERTIME_THRESHOLD = <span class="number">40</span>;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> hours, <span class="keyword">double</span> rate)</span></span>&#123;</div><div class="line">		validateHours(hours);</div><div class="line">		<span class="keyword">return</span> calculatePay(hours, rate);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">double</span> <span class="title">calculatePay</span><span class="params">(<span class="keyword">double</span> hours, <span class="keyword">double</span> rate)</span></span>;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">validateHours</span><span class="params">(<span class="keyword">double</span> hours)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (hours &lt; <span class="number">0</span> || hours &gt; OVERTIME_LIMIT) &#123;</div><div class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Hours out of range: "</span> + hours);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> vn.com.ndd.payroll;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContractorCalculator</span> <span class="keyword">extends</span> <span class="title">PayCalculator</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ContractorCalculator</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculatePay</span><span class="params">(<span class="keyword">double</span> hours, <span class="keyword">double</span> rate)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> hours * rate;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> vn.com.ndd.payroll;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HourlyCalculator</span> <span class="keyword">extends</span> <span class="title">PayCalculator</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">HourlyCalculator</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">super</span>();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculatePay</span><span class="params">(<span class="keyword">double</span> hours, <span class="keyword">double</span> rate)</span> </span>&#123;</div><div class="line">		<span class="keyword">double</span> overTime = Math.max(<span class="number">0</span>, hours - OVERTIME_THRESHOLD);</div><div class="line">		<span class="keyword">return</span> hours * rate + overTime * rate * OVERTIME_BONUS_RATE;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Final class diagram:</p>
<p><img src="https://c2.staticflickr.com/6/5514/30744617115_2e424bc5d0_o.png" alt="UML"></p>
<p>Final source <a href="https://github.com/hieunh161/Refactoring" target="_blank" rel="external">here</a><br>Refactoring is not only the art but also the money!</p>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">

</div>

    <a data-url="https://hieunh161.github.io/at/at/2016/11/03/refactor-sample/" data-id="civ1qi327000rb8p9yndvi16l" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    
        <a href="https://hieunh161.github.io/at/at/2016/11/03/refactor-sample/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="https://hieunh161.github.io/at/at/2016/11/03/refactor-sample/">Comments</a>
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
    
        <a href="/at/2016/11/01/clean-architecture/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">Older</strong>
            <div class="article-nav-title">The Clean Architecture</div>
        </a>
    
</nav>


    
</article>


    
    <section id="comments">
    
        
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    
    </section>

</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/at/2016/11/03/refactor-sample/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/at/categories/software/">software</a></p>
                            <p class="item-title"><a href="/at/2016/11/03/refactor-sample/" class="title">Ví dụ về Refactoring</a></p>
                            <p class="item-date"><time datetime="2016-11-03T00:32:09.000Z" itemprop="datePublished">2016-11-03</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/at/2016/11/01/clean-architecture/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/at/categories/memo/">memo</a></p>
                            <p class="item-title"><a href="/at/2016/11/01/clean-architecture/" class="title">The Clean Architecture</a></p>
                            <p class="item-date"><time datetime="2016-11-01T13:08:29.000Z" itemprop="datePublished">2016-11-01</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/at/2016/10/24/overtime-secret/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/at/categories/production/">production</a></p>
                            <p class="item-title"><a href="/at/2016/10/24/overtime-secret/" class="title">Bí mật của Overtime</a></p>
                            <p class="item-date"><time datetime="2016-10-24T14:07:48.000Z" itemprop="datePublished">2016-10-24</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/at/2016/10/22/javascript-es6-2/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/at/categories/memo/">memo</a></p>
                            <p class="item-title"><a href="/at/2016/10/22/javascript-es6-2/" class="title">Những điểm mới trong ES6 (Phần 2)</a></p>
                            <p class="item-date"><time datetime="2016-10-22T09:55:40.000Z" itemprop="datePublished">2016-10-22</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/at/2016/10/22/javascript-es6/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/at/categories/memo/">memo</a></p>
                            <p class="item-title"><a href="/at/2016/10/22/javascript-es6/" class="title">Những điểm mới trong ES6 (Phần 1)</a></p>
                            <p class="item-date"><time datetime="2016-10-22T03:29:38.000Z" itemprop="datePublished">2016-10-22</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/at/categories/guideline/">guideline</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/at/categories/memo/">memo</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/at/categories/production/">production</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/at/categories/social/">social</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/at/categories/software/">software</a><span class="category-list-count">4</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/at/archives/2016/11/">November 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/at/archives/2016/10/">October 2016</a><span class="archive-list-count">12</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/at/tags/Architecture/">Architecture</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/at/tags/economy/">economy</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/at/tags/es6/">es6</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/at/tags/guideline/">guideline</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/at/tags/javascript/">javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/at/tags/memo/">memo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/at/tags/principle/">principle</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/at/tags/production/">production</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/at/tags/productivity/">productivity</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/at/tags/refactoring/">refactoring</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/at/tags/social/">social</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/at/tags/soft-skill/">soft-skill</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/at/tags/Architecture/" style="font-size: 10px;">Architecture</a> <a href="/at/tags/economy/" style="font-size: 10px;">economy</a> <a href="/at/tags/es6/" style="font-size: 13.33px;">es6</a> <a href="/at/tags/guideline/" style="font-size: 10px;">guideline</a> <a href="/at/tags/javascript/" style="font-size: 13.33px;">javascript</a> <a href="/at/tags/memo/" style="font-size: 10px;">memo</a> <a href="/at/tags/principle/" style="font-size: 16.67px;">principle</a> <a href="/at/tags/production/" style="font-size: 16.67px;">production</a> <a href="/at/tags/productivity/" style="font-size: 20px;">productivity</a> <a href="/at/tags/refactoring/" style="font-size: 10px;">refactoring</a> <a href="/at/tags/social/" style="font-size: 10px;">social</a> <a href="/at/tags/soft-skill/" style="font-size: 10px;">soft-skill</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">links</h3>
        <div class="widget">
            <ul>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2016 AT Team<br>
            Powered by <a href="" target="_blank">AT Team</a>. Written by <a href="http://github.com/hieunh161">PPOffice</a>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_config = function () {
        
            this.page.url = 'https://hieunh161.github.io/at/at/2016/11/03/refactor-sample/';
        
        this.page.identifier = 'refactor-sample';
    };
    (function() { 
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'atblog-1' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>



    
        <script src="/at/vendor/lightgallery/js/lightgallery.min.js"></script>
        <script src="/at/vendor/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/at/vendor/lightgallery/js/lg-pager.min.js"></script>
        <script src="/at/vendor/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/at/vendor/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/at/vendor/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/at/vendor/lightgallery/js/lg-hash.min.js"></script>
        <script src="/at/vendor/lightgallery/js/lg-share.min.js"></script>
        <script src="/at/vendor/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/at/vendor/justified-gallery/jquery.justifiedGallery.min.js"></script>
    



<!-- Custom Scripts -->
<script src="/at/js/main.js"></script>

    </div>
</body>
</html>